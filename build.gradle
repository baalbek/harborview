apply plugin: 'clojure'

group = 'rcstadheim'
archivesBaseName = 'harborview'
version = '1.0'

//aotCompile = true

ext.springVersion = '4.1.4.RELEASE'
ext.junitVersion = '4.11'
ext.log4jVersion = '1.2.17'
ext.mybatisVersion = '3.2.8'
ext.postgresVersion = '9.1-901.jdbc4'
ext.enliveVersion = '1.1.5'

//-------------------- clojure ---------------------
ext.clojureVersion = '1.6.0'
ext.clojureContribVersion = '1.2.0'
ext.algoMonadsVersion = '0.1.5'
ext.clojuresqueVersion = '1.5.8'
ext.numericTowerVersion = '0.0.2'
ext.jsonVersion = '0.5.3'
ext.ringVersion = '1.3.2'
ext.enliveVersion = '1.1.5'
ext.compojureVersion = '1.3.1'

repositories {
    mavenCentral()
    maven {
        url 'http://clojars.org/repo'
    }
}

dependencies {
    compile project(':stearnswharf-repos')
    compile "compojure:compojure:$compojureVersion"
    compile "enlive:enlive:$enliveVersion"
    compile "ring:ring-core:$ringVersion"
    compile "ring:ring-jetty-adapter:$ringVersion"
    compile "ring:ring-servlet:$ringVersion"
    compile "clj-json:clj-json:$jsonVersion"
    compile "org.clojure:clojure:$clojureVersion"
    compile "org.clojure:clojure-contrib:$clojureContribVersion"
    compile "org.clojure:math.numeric-tower:$numericTowerVersion"
    runtime "org.mybatis:mybatis:$mybatisVersion"
    runtime "postgresql:postgresql:$postgresVersion"
    runtime "log4j:log4j:$log4jVersion"
}

task copydeps(type: Copy) {
    into 'dist' from configurations.runtime
}

task setupDist << {
    /*
    ant.symlink(resource: "../src/main/resources/log4j.xml", link: "dist/log4j.xml")
    ant.symlink(resource: "/usr/local/java/jline-0.9.94.jar", link: "dist/jline-0.9.94.jar")
    ant.symlink(resource: "../src/main/resources/public", link: "dist/public")
    ant.symlink(resource: "../src/main/resources/templates", link: "dist/templates")
    ant.symlink(resource: "../src/main/clojure/harborview", link: "dist/harborview")
    */
    ant.symlink(resource: "../src/main/resources/dbcp.properties", link: "dist/dbcp.properties")
    ant.symlink(resource: "../src/main/resources/mybatis.conf.xml", link: "dist/mybatis.conf.xml")
}

buildscript {
    repositories {
        maven {
            url 'http://clojars.org/repo'
        }
    }

    dependencies {
        classpath 'clojuresque:clojuresque:1.5.8'
    }
}

